<div class="calendar-page">
    <!-- Page Header -->
    <div class="page-header">
        <div class="page-header-content">
            <h2><i class="fas fa-calendar-alt"></i> Calendar & Scheduling</h2>
            <p>Manage appointments and schedules</p>
        </div>
        <button class="btn-primary" id="addAppointmentBtn">
            <i class="fas fa-plus"></i> New Appointment
        </button>
    </div>

    <!-- Calendar Stats Cards -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon" style="background: var(--primary-color);">
                <i class="fas fa-calendar-day"></i>
            </div>
            <div class="stat-details">
                <h3 id="todayCount">0</h3>
                <p>Today's Appointments</p>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: var(--secondary-color);">
                <i class="fas fa-calendar-week"></i>
            </div>
            <div class="stat-details">
                <h3 id="weekCount">0</h3>
                <p>This Week</p>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: var(--accent-color);">
                <i class="fas fa-calendar-check"></i>
            </div>
            <div class="stat-details">
                <h3 id="monthCount">0</h3>
                <p>This Month</p>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: var(--success-color);">
                <i class="fas fa-vial"></i>
            </div>
            <div class="stat-details">
                <h3 id="testingCount">0</h3>
                <p>Testing Appointments</p>
            </div>
        </div>
    </div>

    <!-- Calendar Controls -->
    <div class="calendar-controls">
        <div class="calendar-nav">
            <button class="btn-secondary" id="prevPeriod">
                <i class="fas fa-chevron-left"></i> Previous
            </button>
            <h3 id="currentPeriod">January 2026</h3>
            <button class="btn-secondary" id="nextPeriod">
                Next <i class="fas fa-chevron-right"></i>
            </button>
            <button class="btn-secondary" id="todayBtn">
                <i class="fas fa-calendar-day"></i> Today
            </button>
        </div>

        <!-- View Toggle -->
        <div class="view-toggle">
            <button class="view-btn active" id="monthViewBtn" data-view="month">
                <i class="fas fa-calendar"></i> Month
            </button>
            <button class="view-btn" id="weekViewBtn" data-view="week">
                <i class="fas fa-calendar-week"></i> Week
            </button>
        </div>
    </div>

    <!-- Monthly Calendar Grid -->
    <div class="calendar-container" id="monthCalendar">
        <div class="calendar-header">
            <div class="calendar-day-name">Sunday</div>
            <div class="calendar-day-name">Monday</div>
            <div class="calendar-day-name">Tuesday</div>
            <div class="calendar-day-name">Wednesday</div>
            <div class="calendar-day-name">Thursday</div>
            <div class="calendar-day-name">Friday</div>
            <div class="calendar-day-name">Saturday</div>
        </div>
        <div class="calendar-grid" id="calendarGrid">
            <!-- Calendar days will be generated here -->
        </div>
    </div>

    <!-- Weekly Calendar View -->
    <div class="calendar-container calendar-week-view" id="weekCalendar" style="display: none;">
        <div class="week-header">
            <div class="week-time-column">Time</div>
            <div class="week-day-column">Sun</div>
            <div class="week-day-column">Mon</div>
            <div class="week-day-column">Tue</div>
            <div class="week-day-column">Wed</div>
            <div class="week-day-column">Thu</div>
            <div class="week-day-column">Fri</div>
            <div class="week-day-column">Sat</div>
        </div>
        <div class="week-grid" id="weekGrid">
            <!-- Week view will be generated here -->
        </div>
    </div>

    <!-- Hover Popup for Appointment Details -->
    <div class="appointment-popup" id="appointmentPopup" style="display: none;">
        <div class="popup-header">
            <h4 id="popupTitle"></h4>
            <span class="popup-status" id="popupStatus"></span>
        </div>
        <div class="popup-body">
            <div class="popup-row">
                <i class="fas fa-clock"></i>
                <span id="popupTime"></span>
            </div>
            <div class="popup-row" id="popupCompanyRow">
                <i class="fas fa-building"></i>
                <span id="popupCompany"></span>
            </div>
            <div class="popup-row" id="popupLocationRow">
                <i class="fas fa-map-marker-alt"></i>
                <span id="popupLocation"></span>
            </div>
            <div class="popup-row">
                <i class="fas fa-tag"></i>
                <span id="popupService"></span>
            </div>
            <div class="popup-section" id="popupDrugTesting" style="display: none;">
                <div class="popup-section-title">
                    <i class="fas fa-vial"></i> Drug Testing Details
                </div>
                <div class="popup-drug-details" id="popupDrugDetails"></div>
            </div>
            <div class="popup-row" id="popupNotesRow">
                <i class="fas fa-sticky-note"></i>
                <span id="popupNotes"></span>
            </div>
        </div>
        <div class="popup-actions">
            <button class="popup-btn popup-btn-edit" id="popupEditBtn">
                <i class="fas fa-edit"></i> Edit
            </button>
            <button class="popup-btn popup-btn-delete" id="popupDeleteBtn">
                <i class="fas fa-trash"></i> Delete
            </button>
        </div>
    </div>

    <!-- Upcoming Appointments List -->
    <div class="appointments-section">
        <h3><i class="fas fa-list"></i> Upcoming Appointments</h3>
        <div class="appointments-list" id="upcomingAppointments">
            <!-- Appointments will be listed here -->
        </div>
    </div>
</div>

<!-- Appointment Modal -->
<div class="modal" id="appointmentModal">
    <div class="modal-content modal-large">
        <div class="modal-header">
            <h3 id="appointmentModalTitle"><i class="fas fa-calendar-plus"></i> New Appointment</h3>
            <button class="close-btn" id="closeAppointmentModal">&times;</button>
        </div>
        <div class="modal-body">
            <form id="appointmentForm">
                <input type="hidden" id="appointmentId">

                <div class="form-row">
                    <div class="form-group">
                        <label for="appointmentTitle">Appointment Title *</label>
                        <input type="text" id="appointmentTitle" class="form-input" placeholder="e.g., Drug Test - ABC Company" required>
                    </div>

                    <div class="form-group">
                        <label for="appointmentCompany">Company/Client</label>
                        <select id="appointmentCompany" class="form-input">
                            <option value="">Select Company (Optional)</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="appointmentDate">Date *</label>
                        <input type="date" id="appointmentDate" class="form-input" required>
                    </div>

                    <div class="form-group">
                        <label for="appointmentTime">Start Time *</label>
                        <input type="time" id="appointmentTime" class="form-input" required>
                    </div>

                    <div class="form-group">
                        <label for="appointmentDuration">Duration (minutes) *</label>
                        <select id="appointmentDuration" class="form-input" required>
                            <option value="15">15 minutes</option>
                            <option value="30" selected>30 minutes</option>
                            <option value="45">45 minutes</option>
                            <option value="60">1 hour</option>
                            <option value="90">1.5 hours</option>
                            <option value="120">2 hours</option>
                            <option value="180">3 hours</option>
                            <option value="240">4 hours</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="appointmentService">Service Type *</label>
                        <select id="appointmentService" class="form-input" required>
                            <option value="testing">Drug & Alcohol Testing</option>
                            <option value="web">Web Design Consultation</option>
                            <option value="it">IT Services</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="appointmentStatus">Status *</label>
                        <select id="appointmentStatus" class="form-input" required>
                            <option value="scheduled">Scheduled</option>
                            <option value="confirmed">Confirmed</option>
                            <option value="completed">Completed</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                    </div>
                </div>

                <!-- Drug Testing Specific Fields -->
                <div id="drugTestingFields" style="display: none;">
                    <div class="form-section-header">
                        <h4><i class="fas fa-vial"></i> Drug Testing Details</h4>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="testType">Test Type *</label>
                            <select id="testType" class="form-input">
                                <option value="">Select Test Type</option>
                                <option value="poct">POCT (Point of Care Testing)</option>
                                <option value="lab">Lab Testing</option>
                                <option value="poct-to-lab">POCT-to-Lab</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="testingKit">Testing Kit</label>
                            <select id="testingKit" class="form-input">
                                <option value="">Select Testing Kit</option>
                                <option value="5-panel">5-Panel</option>
                                <option value="10-panel">10-Panel</option>
                                <option value="12-panel">12-Panel</option>
                                <option value="other">Other</option>
                            </select>
                            <small>Required for POCT and POCT-to-Lab tests</small>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>What Will Be Tested *</label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" class="test-substance-checkbox" value="breath-alcohol">
                                <span>Breath Alcohol</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" class="test-substance-checkbox" value="urine">
                                <span>Urine Drug Testing</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" class="test-substance-checkbox" value="oral">
                                <span>Oral Drug Testing</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label checkbox-highlight">
                            <input type="checkbox" id="cleanCardRequired">
                            <span><strong>Clean Card Required</strong></span>
                        </label>
                        <small>Check if a clean card documentation is needed</small>
                    </div>
                </div>

                <div class="form-group">
                    <label for="appointmentLocation">Location</label>
                    <input type="text" id="appointmentLocation" class="form-input" placeholder="e.g., Main Office, Client Site">
                </div>

                <div class="form-group">
                    <label for="appointmentNotes">Notes</label>
                    <textarea id="appointmentNotes" class="form-input" rows="3" placeholder="Additional notes or special instructions..."></textarea>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="cancelAppointmentBtn">Cancel</button>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Save Appointment
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal" id="deleteAppointmentModal">
    <div class="modal-content modal-small">
        <div class="modal-header">
            <h3><i class="fas fa-exclamation-triangle"></i> Delete Appointment</h3>
            <button class="close-btn" id="closeDeleteAppointmentModal">&times;</button>
        </div>
        <div class="modal-body">
            <p>Are you sure you want to delete this appointment?</p>
            <p class="delete-warning"><strong id="deleteAppointmentTitle"></strong></p>
            <p style="color: #ef4444; font-size: 14px;">This action cannot be undone.</p>
        </div>
        <div class="modal-actions">
            <button class="btn-secondary" id="cancelDeleteAppointmentBtn">Cancel</button>
            <button class="btn-danger" id="confirmDeleteAppointmentBtn">
                <i class="fas fa-trash"></i> Delete
            </button>
        </div>
    </div>
</div>